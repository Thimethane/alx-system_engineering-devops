#!/usr/bin/env bash

# Check if Nginx is installed
if ! command -v nginx &> /dev/null; then
    # Update package lists for upgrades and new package installations
    apt-get update -y

    # Install Nginx
    apt-get install nginx -y
fi

# Start Nginx service
service nginx start

# Ensure Nginx is set to start at boot
update-rc.d nginx defaults

# Check if Nginx is listening on port 80
if ! netstat -tuln | grep :80 &> /dev/null; then
    echo "Nginx is not listening on port 80. Please check your configuration."
else
    echo "Nginx is running and listening on port 80."
fi
